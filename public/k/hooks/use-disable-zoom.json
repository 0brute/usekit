{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "use-disable-zoom",
  "type": "registry:hook",
  "title": "Use Disable Zoom",
  "description": "Disable zoom for entire website and specific sections with useDisableZoom, providing global and element-specific zoom control with toggle functionality.",
  "files": [
    {
      "path": "registry/hooks/use-disable-zoom.ts",
      "content": "import * as React from \"react\"\n\nexport interface DisableZoomOptions {\n  /** Disable zoom via mouse wheel + ctrl */\n  scroll?: boolean\n  /** Disable zoom via keyboard shortcuts */\n  keyboard?: boolean\n  /** Disable zoom via pinch gesture on touch devices */\n  pinch?: boolean\n  /** Disable zoom globally when hook is initialized */\n  global?: boolean\n}\n\nexport interface DisableZoomReturn {\n  /** Disable zoom globally */\n  disableGlobal: () => void\n  /** Enable zoom globally */\n  enableGlobal: () => void\n  /** Check if zoom is currently disabled globally */\n  isGlobalDisabled: boolean\n  /** Disable zoom for a specific element/section */\n  disableForElement: (element: HTMLElement) => () => void\n  /** Enable zoom for a specific element/section */\n  enableForElement: (element: HTMLElement) => void\n  /** Toggle global zoom state */\n  toggleGlobal: () => void\n}\n\nexport const useDisableZoom = (\n  options: DisableZoomOptions = {}\n): DisableZoomReturn => {\n  const {\n    scroll = true,\n    keyboard = true,\n    pinch = true,\n    global = false,\n  } = options\n\n  const [isGlobalDisabled, setIsGlobalDisabled] = React.useState(global)\n  const elementListenersRef = React.useRef<Map<HTMLElement, (() => void)[]>>(new Map())\n\n  // Global event handlers\n  const handleGlobalKeydown = React.useCallback(\n    (e: KeyboardEvent) => {\n      if (\n        isGlobalDisabled &&\n        keyboard &&\n        e.ctrlKey &&\n        (e.key === \"+\" || \n         e.key === \"-\" || \n         e.key === \"=\" || \n         e.key === \"0\" ||\n         [\"61\", \"107\", \"173\", \"109\", \"187\", \"189\", \"48\"].includes(e.keyCode.toString()))\n      ) {\n        e.preventDefault()\n        e.stopPropagation()\n      }\n    },\n    [isGlobalDisabled, keyboard]\n  )\n\n  const handleGlobalWheel = React.useCallback(\n    (e: WheelEvent) => {\n      if (isGlobalDisabled && scroll && e.ctrlKey) {\n        e.preventDefault()\n        e.stopPropagation()\n      }\n    },\n    [isGlobalDisabled, scroll]\n  )\n\n  const handleGlobalTouchMove = React.useCallback(\n    (e: TouchEvent) => {\n      if (isGlobalDisabled && pinch && e.touches.length > 1) {\n        e.preventDefault()\n        e.stopPropagation()\n      }\n    },\n    [isGlobalDisabled, pinch]\n  )\n\n  // Element-specific event handlers\n  const createElementKeydownHandler = React.useCallback(\n    (element: HTMLElement) => (e: KeyboardEvent) => {\n      if (\n        keyboard &&\n        e.ctrlKey &&\n        (e.key === \"+\" || \n         e.key === \"-\" || \n         e.key === \"=\" || \n         e.key === \"0\" ||\n         [\"61\", \"107\", \"173\", \"109\", \"187\", \"189\", \"48\"].includes(e.keyCode.toString()))\n      ) {\n        // Check if the event target is within this element\n        if (element.contains(e.target as Node)) {\n          e.preventDefault()\n          e.stopPropagation()\n        }\n      }\n    },\n    [keyboard]\n  )\n\n  const createElementWheelHandler = React.useCallback(\n    (element: HTMLElement) => (e: WheelEvent) => {\n      if (scroll && e.ctrlKey && element.contains(e.target as Node)) {\n        e.preventDefault()\n        e.stopPropagation()\n      }\n    },\n    [scroll]\n  )\n\n  const createElementTouchMoveHandler = React.useCallback(\n    (element: HTMLElement) => (e: TouchEvent) => {\n      if (pinch && e.touches.length > 1 && element.contains(e.target as Node)) {\n        e.preventDefault()\n        e.stopPropagation()\n      }\n    },\n    [pinch]\n  )\n\n  // Global control functions\n  const disableGlobal = React.useCallback(() => {\n    setIsGlobalDisabled(true)\n  }, [])\n\n  const enableGlobal = React.useCallback(() => {\n    setIsGlobalDisabled(false)\n  }, [])\n\n  const toggleGlobal = React.useCallback(() => {\n    setIsGlobalDisabled(prev => !prev)\n  }, [])\n\n  // Element-specific control functions\n  const disableForElement = React.useCallback(\n    (element: HTMLElement): (() => void) => {\n      if (!element) {\n        console.warn(\"useDisableZoom: Invalid element provided\")\n        return () => {}\n      }\n\n      // Remove existing listeners for this element\n      enableForElement(element)\n\n      const keydownHandler = createElementKeydownHandler(element)\n      const wheelHandler = createElementWheelHandler(element)\n      const touchMoveHandler = createElementTouchMoveHandler(element)\n\n      // Add event listeners to the element\n      element.addEventListener(\"keydown\", keydownHandler as EventListener)\n      element.addEventListener(\"wheel\", wheelHandler, { passive: false })\n      element.addEventListener(\"touchmove\", touchMoveHandler, { passive: false })\n\n      // Store cleanup functions\n      const cleanupFunctions = [\n        () => element.removeEventListener(\"keydown\", keydownHandler as EventListener),\n        () => element.removeEventListener(\"wheel\", wheelHandler),\n        () => element.removeEventListener(\"touchmove\", touchMoveHandler),\n      ]\n\n      elementListenersRef.current.set(element, cleanupFunctions)\n\n      // Return cleanup function\n      return () => enableForElement(element)\n    },\n    [createElementKeydownHandler, createElementWheelHandler, createElementTouchMoveHandler]\n  )\n\n  const enableForElement = React.useCallback((element: HTMLElement) => {\n    if (!element) {\n      console.warn(\"useDisableZoom: Invalid element provided\")\n      return\n    }\n\n    const cleanupFunctions = elementListenersRef.current.get(element)\n    if (cleanupFunctions) {\n      cleanupFunctions.forEach(cleanup => cleanup())\n      elementListenersRef.current.delete(element)\n    }\n  }, [])\n\n  // Setup global event listeners\n  React.useEffect(() => {\n    if (isGlobalDisabled) {\n      document.addEventListener(\"keydown\", handleGlobalKeydown)\n      document.addEventListener(\"wheel\", handleGlobalWheel, { passive: false })\n      document.addEventListener(\"touchmove\", handleGlobalTouchMove, { passive: false })\n\n      return () => {\n        document.removeEventListener(\"keydown\", handleGlobalKeydown)\n        document.removeEventListener(\"wheel\", handleGlobalWheel)\n        document.removeEventListener(\"touchmove\", handleGlobalTouchMove)\n      }\n    }\n  }, [handleGlobalKeydown, handleGlobalWheel, handleGlobalTouchMove, isGlobalDisabled])\n\n  // Cleanup all element listeners on unmount\n  React.useEffect(() => {\n    return () => {\n      elementListenersRef.current.forEach(cleanupFunctions => {\n        cleanupFunctions.forEach(cleanup => cleanup())\n      })\n      elementListenersRef.current.clear()\n    }\n  }, [])\n\n  return {\n    disableGlobal,\n    enableGlobal,\n    isGlobalDisabled,\n    disableForElement,\n    enableForElement,\n    toggleGlobal,\n  }\n}\n",
      "type": "registry:hook"
    }
  ]
}
